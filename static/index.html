<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pronunciation Practice</title>
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ¤</text></svg>" />

  <!-- Pico CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />

  <!-- Shoelace CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/light.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/static/style.css" />

  <!-- Shoelace Components (autoloader) -->
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/shoelace-autoloader.js"></script>

  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js"></script>

  <!-- dotLottie Player -->
  <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>

  <!-- App Logic -->
  <script src="/static/app.js"></script>
</head>

<body>
  <main class="container" x-data="pronunciationApp">
    <!-- Mascot Animation -->
    <div class="mascot-container">
      <dotlottie-player :src="animations[currentAnimation]" background="transparent" speed="1" loop autoplay>
      </dotlottie-player>
    </div>

    <div class="status-text" x-html="statusHtml"></div>

    <!-- Expected Text Input -->
    <label>
      Expected Sentence:
      <input type="text" x-model="expectedText" placeholder="Type the sentence you want to practice..." />
    </label>

    <!-- Circular Record Button -->
    <div class="record-button-container">
      <sl-button @click="toggleRecording()" :variant="buttonVariant" :pulse="isRecording" :loading="isProcessing"
        size="large" circle style="width: 80px; height: 80px">
        <sl-icon :name="buttonIcon" style="font-size: 1.5rem"></sl-icon>
      </sl-button>
    </div>

    <!-- Results -->
    <article class="result-box" x-show="results" x-transition>
      <h3 x-text="resultTitle"></h3>
      <p x-text="resultMessage"></p>

      <ul class="error-list" x-show="errors.length > 0">
        <template x-for="error in errors">
          <li class="error-item" :class="error.severity === 'critical' ? 'error-critical' : 'error-minor'">
            <strong x-text="error.word"></strong>: <span x-text="error.issue"></span>
            <br><small><em>Suggestion: <span x-text="error.suggestion"></span></em></small>
          </li>
        </template>
      </ul>
    </article>
  </main>
</body>

</html>